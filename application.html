<!doctype html>
<html lang=de>
    <head>
        <!-- Metadaten -->
        <title>enviroCar-Analyser</title>
        <meta charset=utf-8>
        <meta name="description" content="Internet-Applikation zur Exploration und Visualisierung von raum-zeitvarianten Fahrzeug-Messdaten">
        <meta name="keywords" content="enviroCar-Analyser">
        <meta name="application-name" content="enviroCar-Analyser">
        <meta name="author" content="Nicholas Schiestel">
        <meta name="author" content="Johanna Möllmann">
        
        
        <!-- Stylesheets -->
        <link rel="stylesheet" type="text/css" href="stylesheets/application.css">
        <link href='http://fonts.googleapis.com/css?family=Droid+Sans' rel='stylesheet' type='text/css'>
        
        <!--Stylesheet für leaflet.draw -->
        <link rel="stylesheet" type="text/css" href="scripts/leaflet.draw.css">
        
        
        <!-- Script für HTML5 im Microsoft IE -->
        <script>
            document.createElement('header');
            document.createElement('nav');
            document.createElement('article');
            document.createElement('footer');
        </script>
        
        
        <!-- Skripte für das Kartenframework -->
        <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.css" />
        <script src="scripts/externe/leaflet.js"></script>
        <script type="text/javascript" src="scripts/map.js"></script>
		<script type="text/javascript" src="scripts/control.js"></script>
		<script type="text/javascript" src="scripts/track.js"></script>
		<script type="text/javascript" src="scripts/polygon.js"></script>
		<script type="text/javascript" src="scripts/selection.js"></script>
		<script type="text/javascript" src="scripts/analysis.js"></script>
		<script type="text/javascript" src="scripts/interpolation.js"></script>
        <!-- original
            <script src="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.js"></script>
         -->
        
        <!-- Needed for GoogleSatellite Layer -->
        <script src="scripts/externe/js.js"></script>
        <script src="scripts/externe/leaflet-google.js"></script>
        <!-- original
            <script src="http://maps.google.com/maps/api/js?v=3.2&sensor=false"></script>
            <script src="http://matchingnotes.com/javascripts/leaflet-google.js"></script>
        -->
        
        <!-- Needed for RESTful-Request -->
        <script src="scripts/externe/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
        <!-- original
            <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
            <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
        -->

        <!-- Skript zum Ein- und Ausblenden der selektierten Punkte -->
        <script type="text/javascript" src="scripts/toggle.js"></script>
        
        
        <!-- Skripts für die Tooltips in den Selektierwerkzeugen 
            Source: http://onehackoranother.com/projects/jquery/tipsy/ -->
        <script type='text/javascript' src='scripts/jquery.tipsy.js'></script>
        <link rel="stylesheet" href="stylesheets/tipsy.css" type="text/css" />
        <script type='text/javascript' src='scripts/tooltip.js'></script>
        <!-- original
             <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        -->
        
        
        <!-- Skripts um alle Checkboxen der selektierten Punkte auf einmal auszuwählen 
            Source: http://jsfiddle.net/7BXJF/1/ -->
        <script type='text/javascript' src='scripts/forcheckboxes.js'></script>
        <script src="scripts/jquery.validate.js"></script>
        <!-- original 
            <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        -->
       
        
        <!-- Skripte für Kalenderauswahl im Filterbereich -->
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
        <script type="text/javascript" src="scripts/calender.js"></script>
        <!-- original
            <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
            <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
        -->
        
        
        <!-- Skript zum Zeichnen eines Polygons -->
        <script type="text/javascript" src="scripts/leaflet.draw.js"></script>
		
		<!-- Skripte für Diagramme -->
		<script src="http://code.highcharts.com/highcharts.js"></script>
		<script src="scripts/diagram.js"></script>
		
		<!-- Skript für Kriging -->
		<script src="scripts/externe/kriging.js"></script>
		
				
				
		<!-- Skript der Downloadfunktion der Messpunkte aus der Selektionstabelle -->
		<script type="text/javascript" src="scripts/download_messpunkte.js"></script>
        
    
    </head>
    
    
    <!-- Beginn der Seite -->
    <body>
        
		<!-- Infopopups (standarmäßig ausgeblendet) -->
		<div id="infodialog" style="display:none;"></div>

		<!-- Digramm-Popup (standardmäßig ausgeblendet) -->
		<div id=diagram style="margin: 0 auto; display:none;" title="Diagramme"></div>
		
		<!-- Download-Popup (standardmäßig ausgeblendet) -->
		<div id="downloadMpDialog" style="margin: 0 auto; display:none;"></div>
		
    
	 <header role="banner">
            <div id=banner>
                <a href="index.html"><img src="images/envirocar_analyser_logo_mini.png" class=logoImage alt="enviroCar-Analyser"></a>
			</div>
            
            <!-- Filter um Messpunkte vom enviroCar-Server abzufragen -->
            <div id=filter>
                <div id=filter_2>
                    <form id=filterFormular name="filterFormular">
                        <table>
                            <tr>
                                <td>Anfangsdatum:</td>
                                <td><input type="text" id="Start" name="Start" placeholder="z.B. 01/01/2014" class=filterButton></td>
                                <td>Sensor-ID:</td>
                                <td colspan="2">
                                    <input type=text id="Sensor_ID" name="Sensor_ID" placeholder="z.B. 51c97d05e4b0fe5a04e9e735" class=filterButton>
                                </td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Enddatum:</td>
                                <td><input type="text" id="Ende" name="Ende" placeholder=" z.B. 02/01/2014" class=filterButton></td>
                                <td>Fahrzeugtyp:</td>
                                <td><input type=text id="Typ" name="Typ" list=vehicletype placeholder="z.B. BMW" class=filterButton>
                                    <datalist id=vehicletype>
                                        <option value="BMW R 1200 GS"></option>
                                        <option value="BMW 1"></option>
                                        <option value="BMW 525"></option>
                                        <option value="Citroen c1"></option>
                                        <option value="Chevrolet Spark"></option>
                                        <option value="Fiat Stilo"></option>
                                        <option value="Kia Cee'd"></option>
                                        <option value="Lexus IS250X"></option>
                                        <option value="MB R230"></option>
                                        <option value="MISC Freelancer"></option>
                                        <option value="Mitsubishi Outlander 2"></option>
                                        <option value="Opel Zafira_A_1.6_CNG"></option>
                                        <option value="Opel Zafira_1.6_CNG"></option>
                                        <option value="Porsche Boxster S"></option>
                                        <option value="Renault Clio"></option>
                                        <option value="Seat Leon"></option>
                                        <option value="Skoda Fabia"></option>
                                        <option value="skoda oktavia"></option>
                                        <option value="Skoda Octavia Kombi"></option>
                                        <option value="VW Golf"></option>
                                        <option value="VW Multivan"></option>
                                        <option value="vw polo"></option>
                                        <option value="VW T5"></option>
                                        <option value="VW Tiguan"></option>
                                        <option value="VW Touran"></option>
                                        <option value="VW Up"></option>
                                    </datalist></td>
                                <td><input type="button" id="acceptFilter" name="acceptFilter" value="OK" class=submitButton onclick="startFilter()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:document.getElementById('filterFormular').reset();" class=link onclick="resetFilter()">Zurücksetzen</a></td>
                                <td></td>
                            </tr>
                        </table>
                        </form>
                    </div>
                    <div id=filter_1>Filteroptionen</div>
            </div>
            
            <!-- Anzahl der Messpunkte, je höher der Wert, desto mehr Punkte werden von der enviroCar-Datenbank abgefragt
                 Aber mit steigender Anzahl kommt es zu Performanceproblemen
                 Standardmäßig sind 100 Messpunkte eingestellt -->
            <div id=maxOfMeasurements>
                    <ul>
                        <li id="maxOfMeasurementsInfo" original-title="Wenn Sie nicht alle Punkte angezeigt bekommen, erhöhen Sie die Anzahl der Messpunkte. Achtung: Je mehr Punkte aus der Datenbank entnommen werden, desto schlechter ist die Performance der Applikation!">
                             <a onclick="" class=info>i</a>
                        </li>
                        <li>
                            <select id=measurementNumber onChange="setMaxMeas();">
                                <option value="100" onClick="setMaxMeas()">100</option>
                                <option value="200" onClick="setMaxMeas()">200</option>
                                <option value="300" onClick="setMaxMeas()">300</option>
                                <option value="400" onClick="setMaxMeas()">400</option>
                                <option value="500" onClick="setMaxMeas()">500</option>
                            </select>
                        </li>
                    </ul>
            </div>
        </header>
        <div id=clear></div>
        
        <!-- Karte mit Navigationselementen -->
        <div id=map> 
            <div id=pan class=leaflet-control>			
                <a id="left"     class="panelement"><img src="images/left.png" class="panLeft"></a> 
                <a id="right"    class="panelement"><img src="images/right.png" class="panRight"></a>
                <a id="down"     class="panelement"><img src="images/down.png" class="panDown"></a>
                <a id="up"       class="panelement"><img src="images/up.png" class="panUp"></a>
                <a id="locateMe" class="panelementMiddle"><img src="images/location.png" class="imageLocateMe"></a>
            </div>
            <div id=visualisation original-title="Visualisierung zurücksetzen">
                 <a id=resetVisualisation class=visualisationElement onClick="resetVisualization()"><img src="images/reset.png" class=imageVisualisation></a> 
            </div>
            <div id=interpolationDownload original-title="Interpolationsergebnis downloaden">
                 <a id=downloadInterpolation class=visualisationElement onClick="alert('not yet implemented')"><img src="images/download_2.png" class=download_2></a> 
            </div>
            <div id=legende>
                <div class=center><b>Legende</b></div>
                <hr>
                <form name=legendAttributs>
                    <input type="radio" name="interpolationAttribut" value="0" onclick="checkVisualizationAttr()"  checked="checked">&nbsp;&nbsp;Geschwindigkeit<br>
                    <input type="radio" name="interpolationAttribut" value="1" onclick="checkVisualizationAttr()">&nbsp;&nbsp;CO2-Ausstoß<br>
                    <input type="radio" name="interpolationAttribut" value="2" onclick="checkVisualizationAttr()">&nbsp;&nbsp;Spritverbrauch<br>
                    <input type="radio" name="interpolationAttribut" value="3" onclick="checkVisualizationAttr()">&nbsp;&nbsp;MAF<br>
                </form>
                <hr>
                <input type=checkbox id=intMeasurements name=measurements value=measurements onClick="switchIntMeasurements()"> Messpunkte<br>
                <input type=checkbox id=intPoints name=interpolatedPoints value=interpolatedPoints onClick="switchIntPoints()"> Interpolierte Werte<br>
                <input type=checkbox id=intLines name=interpolatedPoints value=interpolatedPoints onClick="switchIntLine()"> Interpolierte Linien
                <hr>
                <div id=interpolationClasses>
                    <table>
                        <tr><td id=interpolationClasses_red>&nbsp;&nbsp;&nbsp;</td><td id="redValue">Intervalwerte</td></tr>
                        <tr><td id=interpolationClasses_orange>&nbsp;&nbsp;&nbsp;</td><td id="orangeValue">Intervalwerte</td></tr>
                        <tr><td id=interpolationClasses_yellow>&nbsp;&nbsp;&nbsp;</td><td id="yellowValue">Intervalwerte</td></tr>
                        <tr><td id=interpolationClasses_green>&nbsp;&nbsp;&nbsp;</td><td id="greenValue">Intervalwerte</td></tr>
                        <tr><td id=interpolationClasses_dark_green>&nbsp;&nbsp;&nbsp;</td><td id="darkGreenValue">Intervalwerte</td></tr>
                    </table>
                </div>
            </div>
        </div>
        
               
        
        <!-- rechte Sidebar -->
        <div id=sidebar>
            
            <!-- Auswahlwerkzeuge um Messpunkte auszuwählen -->
            <div id=selection class=sidebarElement>
                <h2>Selektierwerkzeuge</h2>        
                <div id=chooser>
                    <ul>
                        <li id="chooseSinglePoint" original-title="Verwenden Sie dieses Werkzeug um Punkte nach einander auf der Karte per Mausklick zu selektieren">
                            <a onclick="chooseSingleSelection('chooseSinglePoint');"></a>
                        </li>
                        <li id="chooseTrack" original-title="Verwenden Sie dieses Werkzeug um einen ganzen Track zu suchen und hinzuzufügen. Die Auswahl eines ganzen Tracks ist auch über das Popup eines Messpunktes möglich: Klicken Sie einfach auf der Karte auf einen beliebigen Messpunkt, um das Popup zu öffnen.">
                            <a onclick="chooseTrackSelection();"></a>
                        </li>
                        <li id="choosePolygon"  original-title="Verwenden Sie dieses Werkzeug um Punkte innerhalb eines Raumausschnitts zu selektieren.">
                            <a onclick="choosePolygonSelection();"></a>
                        </li>
                    </ul>
                </div>
                <div id=clear></div>
                <!-- Werkzeuge für Trackauswahl (standardmäßig ausgeblendet, wird eingeblendet sobald "chooseTrack" gewählt wurde) -->
                <div id=selectTrack>
                    <div class=center>
                        <font class=selectTrackTitle>Track finden &amp; auswählen</font>
                    </div>
                    <div class=selectTrackContent>
                        <br>
                        <table>
                            <tr>
                                <td align="left" valign="top">
                                     <input type=text id="Track_ID" name="Track_ID" placeholder="z.B. 51c97d05e4b0fe5a04e9e735" class=filterButton>
                                </td>
                                <td align="right" valign="middle">
                                    <a onclick="" class=info id="trackSelectingInfo" original-title="Wenn Sie eine Track-ID haben, können Sie hier den Track suchen und alle Messpunkte direkt zur Auswahl hinzufügen.">i</a>
                                </td>
                            </tr>
                            <tr>
                                <td align="left" valign="top">
                                    <input type="submit" id="searchTrack" name="searchTrack" value="OK" class=submitButton onClick="chooseTrackSelection()">
                                </td>
                                <td></td>
                            </tr>
                        </table>
                    </div>
                </div>
                
                <div id=drawingPolygon>
                    <div class=center>
                        <font class=drawingElementTitle>Raumausschnitt zeichnen</font>
                    </div>
                    <div class=drawingElementContent>
                        <br>
                        <table>
                            <tr>
                                <td align="left" valign="top" width="30px">
                                    <input type="submit" id="acceptPolygon" name="acceptPolygon" value="OK" class=submitButton onclick="confirmPolygon()">
                                </td>
                                <td align="left" valign="top">
                                    <input type="reset" id="resetPolygon" name="resetPolygon" value="Reset" class=resetButton onclick="deletePolygon(); drawPolygon()"> 
                                </td>
                                <td align="right" valign="middle">
                                    <a onclick="" class=info id="polygonSelectingInfo" original-title="Klicken Sie auf der Karte nacheinander um einen Raumauschnitt zu definieren. Um den Raumausschnitt abzuschließen muss der Anfangspunkt gleich dem Endpunkt sein. Wenn Sie fertig sind, bestätigen Sie mit OK um die Messpunkte zu selektieren. Mit RESET können Sie den gezeichneten Raumausschnitt zurücksetzen und erneut definieren. Das Auswählen eines Polygons kann gegebenenfalls etwas länger dauern.">i</a>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Liste der selektierten Punkte (standardmäßig eingeblendet) -->
            <div id=selectedPoints class=sidebarElement>
                    <a href="#" onclick="toggle_visibility('selectedPointsBox');" class=link><h2>Selektierte Punkte</h2></a>
                    <div id=selectedPointsBox class=sidebarSubElement>
                        <ul class=deleteOptions>
                            <li style="margin-top:-3px;">
                                <input type="checkbox" id="checkAll" name="track_id" value="track_id"> (Alle auswählen)
                            </li>
                            <li>
                                <a href="#" class="link" onClick="clearSelection()">Löschen</a>
                            </li>
                            <li>
                                <a href="#" class="link" onClick="showMeasurementDetails()">Alle Messwerte</a>
                            </li>
                            <li>
                                <a href="#" class="link" onClick=download_sel_pkte();>
									<img src="images/download_2.png" alt="Alle Werte downloaden" class="downloadButton">
								</a>
							</li>
                        </ul>
                        <div id=clear></div>
                        <br>
                        <!-- Liste erscheint mit erstem ausgewählten Punkt-->
                        <div id=pointTable>
                            <br>
                        </div>    
                    </div>
            </div>
            <!-- Analysebox (standardmäßig ausgeblendet) -->
            <div id=analyse class=sidebarElement>
                <a href="#" onclick="toggle_visibility('analyseBox'); toggle_visibility('textualResults');" class=link>     <h2>Analysefunktionen</h2></a>
                <div id=analyseBox class=sidebarSubElement>
                    <ul>
                        <li>Berechnungen von</li>
                        <li>
                            <select id="analysisSelectionBox" onChange="refreshAnalysis();">
                                <option value="Geschwindigkeit">Geschwindigkeit</option>
                                <option value="CO2">CO2-Ausstoß</option>
                                <option value="Spritverbrauch">Spritverbrauch</option>
                                <option value="MAF">MAF</option>
                                <option value="Fahrzeugtyp">Fahrzeugtyp</option>
                            </select>
                        </li>
                    </ul>
                    <div id=textualresults class=sidebarSubElement></div>
                    <hr>
                    <!-- Diagrammvorschau -->
                    <div id=diagramm class=sidebarSubElement>
                        <h3>Diagramme</h3>
                        <div id="diagrammPreview" class="analyseElement">
                            <a href="#diagram" onclick="diagrams()"><img src="images/charts.png" alt="Ergebnisse als Diagramme anzeigen" class="diagrammPreview"></a>
                        <br>
                        <br>
                        </div>
                    </div>
                </div> 
            </div>
            
            <!-- Interpolationsbox -->
            <div id=interpolation class=sidebarElement>
                <a href="#" onclick="toggle_visibility('interpolationBox');" class=link><h2>Interpolation</h2></a>
                <div id=interpolationBox class=sidebarSubElement>
                    <h3>Wählen Sie eine Methode aus</h3>
                    <form id="interpolationMethod" name="interpolation">
                        <input type="radio" name="interpolationMethod" value="0" onclick="showhidediv(this);" checked="checked" >&nbsp;&nbsp;Inverse Distanzwichtung<br>
                        <input type="radio" name="interpolationMethod" value="1" onclick="showhidediv(this);">&nbsp;&nbsp;Kriging<br>
                    </form>
                    <div id=idwBox></div>
                    <div id=krigingBox>
						<form name="krigingParameters">
							<table>
								<tr>
									<td align="left" valign="middle">
                                        Modell
                                    </td>
									<td align="left" valign="middle">
										<select name="krigingModel">
											<option value="gaussian">Gaussian </option>
											<option value="exponential">Exponential</option>
											<option value="spherical">Spherical</option>
										</select>
									</td>
									<td align="right" valign="middle">
                                        <a onclick="" class=info id="krigingModelInfo" original-title="Bitte wählen Sie ein geeignetes Modell aus. Mit den vorgegebenen Werten &#x3C3;&sup2; = 5 und &#x3B1; = 90 lässt sich ein gutes Ergebnis erzielen.">i</a>
                                    </td>
								</tr>
								<tr>
									<td align="left" valign="middle">
                                        &#x3C3;<sup>2</sup>
                                    </td>
									<td align="left" valign="top">
                                        <input type="text" id="sigmatwo" name="SigmaTwo" placeholder="5" class=filterButton>
                                    </td>
									<td align="right" valign="middle">
                                         <a onclick="" class=info id="SimgaInfo" original-title="Bitte tragen Sie einen Wert zwischen 1 und 100 ein.">i</a>
                                    </td>
								</tr>
								<tr>
									<td>
                                        &#x3B1;
                                    </td>
									<td align="left" valign="top">
                                        <input type="text" id="alpha" name="Alpha" placeholder="90" class=filterButton>
                                    </td>
									<td align="right" valign="middle">
                                        <a onclick="" class=info id="alphaInfo" original-title="Bitte tragen Sie einen Wert zwischen 1 und 100 ein.">i</a>
                                    </td>
								</tr>
							</table>
						</form>
                    </div>
                    <div class=right>
                        <input type="submit" id="acceptFilter" name="acceptFilter" value="OK" class=submitButton onClick="startInterpolation()">
                        <input type="submit" id="acceptFilter" name="acceptFilter" value="Download" class=submitButton onClick="downloadsite()">
                    </div>
                </div>
            </div>
            
            <div id=clear> </div>
        </div>
        <div id=clear> </div>
        <!-- Ende der Sidebar-->    
        
        
        <footer>
            <div id="footerLine_1"></div>
            <div id="footerLine_2"></div>
            <div id="footerText">
                <small>
                    &copy; 2014 <a href="http://www.uni-muenster.de/Geoinformatics/">Institut für Geoinformatik</a>
                </small>
            </div>
            <div id="footerShortLinks">
                <small>
                    <ul>
                        <li><a href="index.html">Startseite</a></li>
                        <li><a href="help.html">Benutzerhilfe</a></li>
                        <li><a href="docu.html">Dokumentation</a></li>
                        <li><a href="impressum.html">Impressum</a></li>
                        <li><a href="application.html">Applikation</a></li>
                    </ul>
                </small>
            </div>
        </footer>
    </body>
</html>

